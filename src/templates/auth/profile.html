{% extends "base_dark.html" %} {% block title %}Perfil - Telegram Bot Manager{%
endblock %} {% block content %}
<!-- Dashboard Header (mesmo padrão da dashboard) -->
<header class="dashboard-header">
  <div class="header-left">
    <h1>Meu Perfil</h1>
    <p>Gerencie suas informações pessoais e configurações da conta</p>
  </div>
</header>

<!-- Stats Cards (mesmo padrão da dashboard) -->
<div class="stats-grid">
  <!-- Informações do perfil -->
  <div class="stat-card">
    <div class="stat-header">
      <span class="stat-title">
        <i class="fas fa-user"></i>
        Username
      </span>
    </div>
    <div class="stat-value" style="font-size: 20px">
      {{ current_user.username }}
    </div>
  </div>

  <div class="stat-card">
    <div class="stat-header">
      <span class="stat-title">
        <i class="fas fa-envelope"></i>
        Email
      </span>
    </div>
    <div class="stat-value" style="font-size: 16px">
      {{ current_user.email }}
    </div>
  </div>

  <div class="stat-card">
    <div class="stat-header">
      <span class="stat-title">
        <i class="fas fa-robot"></i>
        Total de Bots
      </span>
    </div>
    <div class="stat-value">{{ current_user.bots|length }}</div>
    <div class="stat-change positive">
      {{ current_user.get_active_bots_count() }} ativos
    </div>
  </div>

  <div class="stat-card">
    <div class="stat-header">
      <span class="stat-title">
        <i class="fas fa-calendar"></i>
        Membro desde
      </span>
    </div>
    <div class="stat-value" style="font-size: 18px">
      {{ current_user.created_at.strftime('%d/%m/%Y') }}
    </div>
  </div>

  <div class="stat-card">
    <div class="stat-header">
      <span class="stat-title">
        <i class="fas fa-user"></i>
        Taxa
      </span>
    </div>
    <div class="stat-value" style="font-size: 20px">
      {{ current_user.fee }} R$ por transação
    </div>
  </div>
</div>

<!-- Charts Section (mesmo padrão da dashboard) -->
<div class="charts-grid">
  <!-- Configuração de Pagamentos -->
  <div class="chart-card large">
    <div class="chart-header">
      <h3>Configuração de Pagamentos</h3>
      <div class="chart-legend">
        <span class="legend-item">
          <i class="fas fa-credit-card"></i>
          Configure seu token PushinPay para receber pagamentos
        </span>
      </div>
    </div>

    {% if current_user.pushinpay_token %}
    <div
      class="chart-milestone"
      style="background: var(--success-bg); border-left-color: var(--success)"
    >
      <i
        class="fas fa-check-circle"
        style="color: var(--success); font-size: 20px"
      ></i>
      <div style="flex: 1">
        <div class="milestone-value" style="color: var(--success)">
          Token Configurado
        </div>
        <div class="milestone-date">
          Seus bots já podem receber pagamentos automaticamente
        </div>
      </div>
    </div>
    {% else %}
    <div
      class="chart-milestone"
      style="background: rgba(245, 158, 11, 0.1); border-left-color: #f59e0b"
    >
      <i
        class="fas fa-exclamation-triangle"
        style="color: #f59e0b; font-size: 20px"
      ></i>
      <div style="flex: 1">
        <div class="milestone-value" style="color: #f59e0b">
          Token Não Configurado
        </div>
        <div class="milestone-date">
          Configure seu token para começar a receber pagamentos
        </div>
      </div>
    </div>
    {% endif %}

    <div style="margin-top: 20px">
      <button onclick="toggleTokenForm()" class="btn-primary">
        <i class="fas fa-cog"></i>
        {% if current_user.pushinpay_token %}Alterar Token{% else %}Configurar
        Token{% endif %}
      </button>
    </div>

    <!-- Formulário de token (escondido por padrão) -->
    <div
      id="tokenForm"
      style="
        display: none;
        margin-top: 20px;
        padding: 20px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.1);
      "
    >
      <form method="POST" action="{{ url_for('auth.save_pushinpay_token') }}">
        <div style="margin-bottom: 16px">
          <label
            for="token"
            style="
              display: block;
              margin-bottom: 8px;
              font-weight: 500;
              color: var(--text-primary);
              font-size: 14px;
            "
          >
            <i class="fas fa-key"></i> Token Bearer PushinPay:
          </label>
          <input
            type="text"
            id="token"
            name="token"
            placeholder="Bearer 11111|XXXXXXXXXXXXXXXXXXXXX"
            required
            style="
              width: 100%;
              padding: 12px;
              background: rgba(255, 255, 255, 0.1);
              border: 1px solid rgba(255, 255, 255, 0.2);
              border-radius: 8px;
              color: var(--text-primary);
              font-family: 'Courier New', monospace;
              font-size: 14px;
            "
          />
          <small
            style="
              color: var(--text-muted);
              font-size: 12px;
              margin-top: 4px;
              display: block;
            "
          >
            <i class="fas fa-info-circle"></i>
            Obtenha este token no painel administrativo da PushinPay
          </small>
        </div>
        <div style="display: flex; gap: 12px">
          <button type="submit" class="btn-primary">
            <i class="fas fa-save"></i>
            Salvar Token
          </button>
          <button
            type="button"
            onclick="toggleTokenForm()"
            class="btn-secondary"
          >
            <i class="fas fa-times"></i>
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Como Funciona -->
  <div class="chart-card small">
    <div class="chart-header">
      <h4>Como Obter o Token</h4>
    </div>

    <div
      style="display: flex; flex-direction: column; gap: 16px; margin-top: 16px"
    >
      <div style="display: flex; align-items: center; gap: 12px">
        <div
          style="
            width: 24px;
            height: 24px;
            background: var(--purple);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 600;
            flex-shrink: 0;
          "
        >
          1
        </div>
        <div>
          <div
            style="
              font-weight: 600;
              color: var(--text-primary);
              font-size: 14px;
            "
          >
            Acesse a PushinPay
          </div>
          <div style="color: var(--text-secondary); font-size: 12px">
            Faça login em sua conta
          </div>
        </div>
      </div>

      <div style="display: flex; align-items: center; gap: 12px">
        <div
          style="
            width: 24px;
            height: 24px;
            background: var(--purple);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 600;
            flex-shrink: 0;
          "
        >
          2
        </div>
        <div>
          <div
            style="
              font-weight: 600;
              color: var(--text-primary);
              font-size: 14px;
            "
          >
            Vá em API/Tokens
          </div>
          <div style="color: var(--text-secondary); font-size: 12px">
            Navegue até tokens de API
          </div>
        </div>
      </div>

      <div style="display: flex; align-items: center; gap: 12px">
        <div
          style="
            width: 24px;
            height: 24px;
            background: var(--purple);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 600;
            flex-shrink: 0;
          "
        >
          3
        </div>
        <div>
          <div
            style="
              font-weight: 600;
              color: var(--text-primary);
              font-size: 14px;
            "
          >
            Copie o Token
          </div>
          <div style="color: var(--text-secondary); font-size: 12px">
            Copie o token Bearer completo
          </div>
        </div>
      </div>
    </div>

    <div
      style="
        margin-top: 20px;
        padding: 12px;
        background: rgba(139, 92, 246, 0.1);
        border-radius: 8px;
        border-left: 3px solid var(--purple);
      "
    >
      <div
        style="
          display: flex;
          align-items: center;
          gap: 8px;
          color: var(--purple);
          font-size: 12px;
          font-weight: 600;
        "
      >
        <i class="fas fa-shield-alt"></i>
        Seu token é criptografado e armazenado com segurança
      </div>
    </div>
  </div>

  <!-- Vantagens -->
  <div class="chart-card small">
    <div class="chart-header">
      <h4>Vantagens da Integração</h4>
    </div>

    <div
      style="display: flex; flex-direction: column; gap: 12px; margin-top: 16px"
    >
      <div
        style="
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 8px;
          background: rgba(255, 255, 255, 0.05);
          border-radius: 6px;
        "
      >
        <i
          class="fas fa-money-bill-wave"
          style="color: var(--success); font-size: 16px"
        ></i>
        <div>
          <div
            style="
              font-weight: 600;
              color: var(--text-primary);
              font-size: 13px;
            "
          >
            Pagamento Direto
          </div>
          <div style="color: var(--text-secondary); font-size: 11px">
            100% dos valores para sua conta
          </div>
        </div>
      </div>

      <div
        style="
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 8px;
          background: rgba(255, 255, 255, 0.05);
          border-radius: 6px;
        "
      >
        <i class="fas fa-bolt" style="color: #f59e0b; font-size: 16px"></i>
        <div>
          <div
            style="
              font-weight: 600;
              color: var(--text-primary);
              font-size: 13px;
            "
          >
            Automático 24/7
          </div>
          <div style="color: var(--text-secondary); font-size: 11px">
            PIX gerado e verificado automaticamente
          </div>
        </div>
      </div>

      <div
        style="
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 8px;
          background: rgba(255, 255, 255, 0.05);
          border-radius: 6px;
        "
      >
        <i class="fas fa-users" style="color: var(--blue); font-size: 16px"></i>
        <div>
          <div
            style="
              font-weight: 600;
              color: var(--text-primary);
              font-size: 13px;
            "
          >
            Grupos VIP
          </div>
          <div style="color: var(--text-secondary); font-size: 11px">
            Adição automática após pagamento
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block scripts %}
<script>
  function toggleTokenForm() {
    const form = document.getElementById("tokenForm");
    if (form.style.display === "none") {
      form.style.display = "block";
      form.scrollIntoView({ behavior: "smooth" });
    } else {
      form.style.display = "none";
    }
  }
</script>
{% endblock %}
